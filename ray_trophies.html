<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ray's FS22 Trophies</title>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.1);
            --gold: #ffd700;
            --alert-orange: #ff4500;
            --text: #ffffff;
        }

        body {
            background: transparent; /* Allows main dashboard background to show through */
            font-family: 'Inter', sans-serif;
            color: var(--text);
            margin: 0;
            padding: 10px;
        }

        #trophyList {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 12px;
        }

        .trophy-item {
            background: rgba(0, 0, 0, 0.6);
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #444;
            backdrop-filter: blur(5px);
        }

        /* Unearned styling (Prioritized at top) */
        .trophy-item.unearned {
            border-left: 4px solid var(--alert-orange);
            background: rgba(255, 69, 0, 0.1);
            order: -1; /* Forces these to the top of the flex/grid */
        }

        .trophy-item.earned {
            border-left: 4px solid #00ff00;
            opacity: 0.6;
        }

        .trophy-title {
            font-weight: 900;
            display: block;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .trophy-status {
            font-size: 0.7em;
            font-weight: 600;
            letter-spacing: 1px;
            margin-top: 4px;
            display: block;
        }

        .unearned .trophy-status { color: var(--alert-orange); }
        .earned .trophy-status { color: #00ff00; }
    </style>
</head>
<body>

<div id="trophyList">Initializing PSN Uplink...</div>

<script>
    async function getTrophies() {
        const rssUrl = 'https://psntrophyleaders.com/user/view/OneLIVIDMAN/rss';
        // Using a more robust AllOrigins proxy to bypass CORS
        const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(rssUrl)}`;

        try {
            const response = await fetch(proxyUrl);
            const data = await response.json();
            
            // Parse the XML string from the proxy response
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(data.contents, "text/xml");
            const items = Array.from(xmlDoc.querySelectorAll("item"));
            
            const listContainer = document.getElementById('trophyList');
            listContainer.innerHTML = '';

            // Filter for FS22 specifically
            const fs22Trophies = items.filter(item => 
                item.querySelector("title").textContent.includes("Farming Simulator 22")
            );

            if (fs22Trophies.length === 0) {
                listContainer.innerHTML = "No FS22 Trophy Data Detected.";
                return;
            }

            fs22Trophies.forEach(item => {
                const title = item.querySelector("title").textContent.replace("Farming Simulator 22 - ", "");
                const description = item.querySelector("description").textContent;
                
                // If the description doesn't contain a date, it's unearned
                const isEarned = description.toLowerCase().includes("earned on");
                
                const div = document.createElement('div');
                div.className = `trophy-item ${isEarned ? 'earned' : 'unearned'}`;
                
                div.innerHTML = `
                    <span class="trophy-title">${title}</span>
                    <span class="trophy-status">${isEarned ? 'STATUS: SECURED' : 'STATUS: PENDING ACQUISITION'}</span>
                `;
                listContainer.appendChild(div);
            });
        } catch (error) {
            document.getElementById('trophyList').innerHTML = "ERROR: Failed to bypass PSN Firewall.";
            console.error(error);
        }
    }

    getTrophies();
</script>

</body>
</html>
